(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{788:function(e,t,i){Promise.resolve().then(i.bind(i,71841))},71841:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return S}}),i(60192);var n=i(3827),l=i(66413),a=i(54784),o=i(29835),s=i(60304),r=i(79353),d=i(7765),c=i(64090),u=i(15704),h=i(6285);let p=(0,i(58836).ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%","& .ant-empty-img-1":{fill:"light"===t.palette.mode?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:"light"===t.palette.mode?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:"light"===t.palette.mode?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:"light"===t.palette.mode?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:"light"===t.palette.mode?"0.8":"0.08",fill:"light"===t.palette.mode?"#f5f5f5":"#fff"}}});function m(){return(0,n.jsxs)(p,{children:[(0,n.jsx)("svg",{style:{flexShrink:0},width:"240",height:"200",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:(0,n.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,n.jsxs)("g",{transform:"translate(24 31.67)",children:[(0,n.jsx)("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),(0,n.jsx)("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),(0,n.jsx)("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),(0,n.jsx)("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),(0,n.jsx)("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),(0,n.jsxs)("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[(0,n.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),(0,n.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),(0,n.jsx)(s.Z,{sx:{mt:1},children:"No posts"}),(0,n.jsx)(h.Z,{startIcon:(0,n.jsx)(u.Z,{}),variant:"contained",sx:{mt:2},children:"Create new post now!"})]})}var f=i(35217),g=i(60036),x=i(70895),v=e=>{let{open:t,title:i,message:l,postTitle:a,onConfirm:s,onCancel:r}=e;return(0,n.jsx)(g.Z,{open:t,onClose:r,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",children:(0,n.jsxs)(x.Z,{direction:"column",p:3,alignItems:"center",children:[(0,n.jsx)(f.Z,{sx:{fontSize:40},color:"error"}),(0,n.jsx)(o.Z,{variant:"h5",color:"error",gutterBottom:!0,children:"Are you sure you want to delete post?"}),(0,n.jsx)(o.Z,{variant:"body1",children:a}),(0,n.jsxs)(x.Z,{direction:"row",spacing:2,mt:2,justifyContent:"flex-end",children:[(0,n.jsx)(h.Z,{onClick:r,color:"inherit",variant:"contained",children:"Cancel"}),(0,n.jsx)(h.Z,{onClick:s,color:"error",variant:"contained",autoFocus:!0,children:"Delete"})]})]})})},j=i(94038),w=i(3509),y=i(28961),Z=i(2957),b=i(98899),C=i(43206);function E(e){let{postId:t,postTitle:i}=e,[l,a]=(0,c.useState)(!0),o=(e,t)=>{let i=new CustomEvent("delete-confirmation",{detail:{postId:e,postTitle:t}});window.dispatchEvent(i)},s=e=>{let t=new CustomEvent("toggle-display",{detail:{postId:e,visibility:!l}});a(e=>!e),window.dispatchEvent(t)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(x.Z,{height:100,direction:"row",alignItems:"center",children:[(0,n.jsx)(b.Z,{title:"Hide post",children:(0,n.jsx)(C.Z,{"aria-label":"hide",children:l?(0,n.jsx)(j.Z,{fontSize:"inherit",onClick:()=>s(t)}):(0,n.jsx)(w.Z,{fontSize:"inherit",onClick:()=>s(t)})})}),(0,n.jsx)(b.Z,{title:"Edit post",children:(0,n.jsx)(C.Z,{color:"info","aria-label":"edit post",children:(0,n.jsx)(y.Z,{fontSize:"inherit"})})}),(0,n.jsx)(b.Z,{title:"Delete post",children:(0,n.jsx)(C.Z,{color:"error","aria-label":"delete post",onClick:()=>o(t,i),children:(0,n.jsx)(Z.Z,{fontSize:"inherit"})})})]})})}let z=[{field:"id",headerName:"ID",width:60},{field:"postId",headerName:"Post ID",width:0},{field:"thumbnail",headerName:"Thumbnail",width:120,renderCell:e=>(0,n.jsx)("img",{width:100,height:100,style:{paddingTop:10,paddingBottom:10},src:e.value})},{field:"name",headerName:"Title",width:600,renderCell:e=>(0,n.jsx)("div",{className:"titleCell",children:e.value})},{field:"status",headerName:"Status",width:150,renderCell:e=>(0,n.jsx)(a.Z,{label:e.value,color:"success",variant:"outlined"})},{field:"actions",headerName:"Actions",sortable:!1,width:150,renderCell:e=>(0,n.jsx)(E,{postTitle:e.row.name,postId:e.row.postId,refetch:()=>{}}),disableClickEventBubbling:!0}];var S=()=>{var e,t,i;let[a,u]=(0,c.useState)(!1),[h,p]=(0,c.useState)(null),[f,{isLoading:g,isSuccess:x,isError:j}]=(0,l.jn)(),[w,y]=(0,c.useState)(!1),[Z,b]=(0,c.useState)(""),[C,E]=(0,c.useState)({pageSize:5,page:0}),{data:S,error:N,isLoading:M,refetch:I}=(0,l.wf)({page:C.page+1,limit:C.pageSize}),k=async e=>{try{await f(e).unwrap(),b("Post deleted successfully");let t=new CustomEvent("post-deleted",{detail:{postId:e,status:"success"}});window.dispatchEvent(t)}catch(e){b("Error deleting post")}u(!1),y(!0)};if((0,c.useEffect)(()=>{let e=e=>{u(!0),p({postId:e.detail.postId,postTitle:e.detail.postTitle})},t=e=>{b("Post visibility toggled successfully"),y(!0)};return window.addEventListener("delete-confirmation",e),window.addEventListener("post-deleted",I),window.addEventListener("toggle-display",t),()=>{window.removeEventListener("post-deleted",I),window.removeEventListener("delete-confirmation",e),window.removeEventListener("toggle-display",t)}},[I]),M)return(0,n.jsx)(o.Z,{children:"Loading..."});if(N)return(0,n.jsxs)(o.Z,{children:["Error: ",N.message]});let H=(null!==(t=null==S?void 0:S.properties)&&void 0!==t?t:[]).map((e,t)=>({id:t+1+C.page*C.pageSize,postId:e._id,thumbnail:e.thumbnail,name:e.name,status:"Active"}));return(0,n.jsxs)(s.Z,{sx:{width:"100%",height:"calc(100vh - 60px)",overflow:"auto",px:4,pt:4},children:[(0,n.jsx)(o.Z,{variant:"h4",gutterBottom:!0,children:"My Posts"}),(0,n.jsx)(d._,{initialState:{columns:{columnVisibilityModel:{postId:!1}}},columns:z,rows:H,rowCount:null!==(i=null==S?void 0:null===(e=S.pagination)||void 0===e?void 0:e.total_records)&&void 0!==i?i:0,rowHeight:100,autoHeight:!0,paginationModel:C,paginationMode:"server",onPaginationModelChange:E,checkboxSelection:!0,slots:{noRowsOverlay:m},sx:{"--DataGrid-overlayHeight":"350px"}}),(0,n.jsx)(v,{postTitle:null==h?void 0:h.postTitle,open:a,onCancel:()=>u(!1),onConfirm:()=>k(null==h?void 0:h.postId)}),(0,n.jsx)(r.Z,{open:w,autoHideDuration:6e3,onClose:()=>y(!1),message:Z})]})}},60192:function(e,t,i){"use strict";i(3827),i(47907),i(64090)},66413:function(e,t,i){"use strict";i.d(t,{WQ:function(){return o},jn:function(){return r},wf:function(){return s}});let{fetchBaseQuery:n}=i(60077),l=n({baseUrl:"http://localhost:3000",prepareHeaders:(e,t)=>{let{getState:i}=t,n=i().auth.accessToken;return console.log(n),n&&e.set("Authorization","Bearer ".concat(n)),e}});var a=i(66817);let o=(0,i(43741).LC)({reducerPath:"landlord",baseQuery:l,endpoints:e=>({getMyProperties:e.query({query:e=>({url:"/posts/me",params:{...e}}),transformResponse:a.F}),deletePost:e.mutation({query:e=>({url:"/posts/".concat(e),method:"DELETE"})})})}),{useGetMyPropertiesQuery:s,useDeletePostMutation:r}=o},66817:function(e,t,i){"use strict";i.d(t,{F:function(){return n}});let n=e=>{var t;return{properties:null!==(t=null==e?void 0:e.data)&&void 0!==t?t:[],pagination:null==e?void 0:e.pagination}}}},function(e){e.O(0,[826,665,585,741,865,784,107,824,2,971,69,744],function(){return e(e.s=788)}),_N_E=e.O()}]);