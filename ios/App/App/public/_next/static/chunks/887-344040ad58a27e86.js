"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{26820:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var a=n(3827),r=n(55066),o=n(56095),l=n(17746),i=n(5246),s=n(21897),c=n(11691),d=n(13790),u=n(85195),p=n(95996),h=n(60304),m=n(54784),v=n(29835),g=n(58129),x=n(47002),f=n(17489),y=n(43206),b=n(3340),j=n(53302),Z=n(8792);let L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:"".concat(e),WebkitBoxOrient:"vertical"}};function w(e){let{property:{_id:t,address:n,name:r,description:w,price:I,area:D,thumbnail:P,owner:S,bedrooms:k,bathrooms:E,property_type:_}}=e;return k=1,E=1,(0,a.jsxs)(u.Z,{variant:"outlined",sx:{maxWidth:390},children:[(0,a.jsx)(b.Z,{image:P,sx:{width:"100%",height:230,objectFit:"contain"},title:r}),(0,a.jsxs)(p.Z,{children:[(0,a.jsxs)(h.Z,{display:"flex",mb:1,gap:1,children:[(0,a.jsx)(m.Z,{size:"small",icon:(0,a.jsx)(l.Z,{}),label:"Tin mới",color:"blue"}),(0,a.jsx)(m.Z,{size:"small",label:o.PG[_].viLabel})]}),(0,a.jsx)(v.Z,{variant:"h4",component:Z.default,href:"/posts/".concat(t),gutterBottom:!0,sx:{fontSize:"1rem",lineHeight:1.25,fontWeight:600,textDecoration:"none",color:"text.primary",textWrap:"stable",...L(1)},children:(e=>{let{street:t,district:n,province:a}=e;return"".concat(t,", ").concat(n,", ").concat(a)})(n)}),(0,a.jsx)(v.Z,{variant:"body1",sx:{fontWeight:600,fontSize:"1.25rem"},color:"primary",gutterBottom:!0,children:I+" triệu/th\xe1ng"}),(0,a.jsxs)(h.Z,{display:"flex",alignItems:"center",gap:3,mb:1,children:[(0,a.jsxs)(h.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)(d.Z,{sx:{fontSize:20,marginRight:.5}}),(0,a.jsx)(v.Z,{variant:"body1",children:"".concat(k," pn")})]}),(0,a.jsxs)(h.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)(c.Z,{sx:{fontSize:20,marginRight:.5}}),(0,a.jsx)(v.Z,{variant:"body1",children:"".concat(E," wc")})]}),D&&(0,a.jsxs)(h.Z,{display:"flex",alignItems:"center",children:[(0,a.jsx)(i.Z,{sx:{fontSize:20,marginRight:.5}}),(0,a.jsxs)(v.Z,{variant:"body1",children:[D+"m",(0,a.jsx)("sup",{children:"2"})]})]})]}),(0,a.jsx)(v.Z,{variant:"body2",paragraph:!0,sx:{...L(2)},children:w})]}),(0,a.jsx)(g.Z,{}),(0,a.jsx)(x.Z,{sx:{paddingX:2,paddingY:1},avatar:(0,a.jsx)(f.Z,{sx:{bgcolor:j.Z[500],width:32,height:32},"aria-label":(null==S?void 0:S.name)||"Ẩn danh",alt:(null==S?void 0:S.name)||"Ẩn danh",src:null==S?void 0:S.avatar}),action:(0,a.jsx)(y.Z,{"aria-label":"add to favorites",children:(0,a.jsx)(s.Z,{})}),title:(null==S?void 0:S.name)||"Ẩn danh",subheader:"Đăng h\xf4m nay"})]},t)}var I=n(70895),D=n(6285);function P(){return(0,a.jsxs)(I.Z,{spacing:2,justifyContent:"flex-start",alignItems:"flex-start",children:[(0,a.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Oops! Looks like there aren't any properties matching your search."}),(0,a.jsx)(v.Z,{children:"Remove some filters to find more properties:"}),(0,a.jsxs)(I.Z,{direction:"row",spacing:1,flexWrap:"wrap",children:[(0,a.jsx)(m.Z,{label:"Dormitory",onDelete:()=>alert("Deleted")}),(0,a.jsx)(m.Z,{label:"Dormitory",onDelete:()=>alert("Deleted")}),(0,a.jsx)(m.Z,{label:"Clear all filters",onDelete:()=>alert("Deleted")}),(0,a.jsx)(m.Z,{label:"Clear all filters",onDelete:()=>alert("Deleted")}),(0,a.jsx)(m.Z,{label:"Dormitory",onDelete:()=>alert("Deleted")}),(0,a.jsx)(m.Z,{label:"Dormitory",onDelete:()=>alert("Deleted")})]}),(0,a.jsx)(D.Z,{variant:"outlined",color:"secondary",children:"Reset all filters"})]})}var S=n(36115);function k(e){let{properties:t,currentPage:n,totalPages:o,handlePageChange:l}=e;return t&&0!==t.length?(0,a.jsxs)(S.Z,{container:!0,spacing:2,children:[t.map(e=>(0,a.jsx)(S.Z,{sm:12,md:6,children:(0,a.jsx)(w,{property:e})},e._id)),(0,a.jsx)(S.Z,{xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,a.jsx)(r.Z,{count:o,page:n,onChange:l,sx:{marginBottom:2}})})]}):(0,a.jsx)(P,{})}var E=n(19524),_=n.n(E),B=n(47907),C=n(64090),z=n(72827),R=n(57607),M=n(13540),W=n.n(M),T=function(e){var t=e.map(e=>e[0]),n=e.map(e=>e[1]);return[[Math.min(...n),Math.min(...t)],[Math.max(...n),Math.max(...t)]]},F=n(37679),H=n.n(F),O=n(23007);n(86742);var Q=e=>{var t;let{center:n=[107.6416527,11.295036],markerList:r=[]}=e,[o,l]=(0,z.useQueryParam)("center",z.StringParam),[i,s]=(0,z.useQueryParam)("boundary",z.StringParam),[c,d]=n,u=(0,C.useRef)(null),[p,h]=(0,C.useState)(null),[m,v]=(0,C.useState)(null),g=p?"".concat(p.coordinates[1],",").concat(p.coordinates[0]):"";return t="".concat(d,",").concat(c),(0,C.useEffect)(()=>{m&&t&&g&&(async()=>{let e="/api/direction?origin=".concat(t,"&destination=").concat(g),n=await fetch(e);return await n.json()})().then(e=>{console.log(e);let t=e.routes[0].overview_polyline.points,n=H().decode(t),a=T(n);m.fitBounds(a,{padding:{top:80,bottom:80,left:80,right:80}}),m.getLayer("route-layer")&&m.removeLayer("route-layer"),m.getSource("route")&&m.removeSource("route"),m.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:n.map(e=>[e[1],e[0]])}}}),m.addLayer({id:"route-layer",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"red","line-width":8,"line-opacity":.3}})}).catch(e=>console.error(e))},[m,t,g]),!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};(0,C.useEffect)(()=>{if(!e||!t.length)return;let a=t.map(t=>{let a=!1,r=new(W()).Popup({closeButton:!1}).setHTML('\n    <img src="'.concat(t.image,'" alt="').concat(t.name,'" style="width:100%;max-height:100px;object-fit: cover;">\n    <h2 style="color:red">').concat(0==t.price?"Gi\xe1 thoả thuận":t.price+" triệu/th\xe1ng"," </h2>\n    <p>").concat(t.displayed_address,'</p>\n    <a arget="_blank" href="/posts/').concat(t.id,'">Xem chi tiết</a>\n    ')),o=new(W()).Marker().setPopup(r).setLngLat(t.coordinates).addTo(e),l=o.getElement();return l.addEventListener("click",()=>{n(t)}),l.addEventListener("mouseenter",()=>{a=!0,r.addTo(e)}),l.addEventListener("mouseleave",()=>{a=!1,setTimeout(()=>a||r.remove(),500)}),r.on("open",()=>{let e=r.getElement();e.addEventListener("mouseenter",()=>a=!0),e.addEventListener("mouseleave",()=>{a=!1,r.remove()})}),o});return()=>{a.forEach(e=>e.remove())}},[e,t])}(m,r,e=>h(e)),(0,C.useEffect)(()=>{W().accessToken="zamQattg6ynWbtQEYEllUqz5uhE2pSLm0VS4ilev";let e=new(W()).Map({container:u.current,style:"https://tiles.goong.io/assets/goong_light_v2.json",center:[c,d]});return v(e),new(W()).Marker({color:"red"}).setLngLat([c,d]).addTo(e),e.on("load",function(){let{polygon:t,convex:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?function(e){if(!e)return null;let t=H().decode(e),n=(0,O.yue)([t.map(e=>[e[1],e[0]])]),a=(0,O.i$2)(n);return{polygon:n,convex:a}}(t):function(e,t){let n=(0,O.Xwo)(e,3,{steps:64,units:"kilometers"});return{polygon:n,convex:n}}(e,0)}(o?o.split(",").map(e=>parseFloat(e)):[106.660172,10.762622],i),a=n.geometry.coordinates[0],r=a.reduce(function(e,t){return e.extend(t)},new(W()).LngLatBounds(a[0],a[0]));e.fitBounds(r,{padding:20,duration:0}),e.addSource("boundary",{type:"geojson",data:t}),e.addLayer({id:"maine",type:"fill",source:"boundary",layout:{},paint:{"fill-color":"#088","fill-opacity":.4}}),e.addSource("outerbox",{type:"geojson",data:n}),e.addLayer({id:"maine2",type:"line",source:"outerbox",layout:{},paint:{"line-color":"#888","line-width":3}})}),()=>{e.remove()}},[c,d,r]),(0,a.jsx)("div",{ref:u,style:{width:"100%",height:"100%"}})},q=n(58836),N=n(35841),V=n(25211);function A(e){let{loading:t}=e;return t&&(0,a.jsx)(N.Z,{open:t,sx:{color:"#fff",zIndex:1e4},children:(0,a.jsx)(V.Z,{color:"inherit",size:100})})}let G=(0,q.ZP)(h.Z)(e=>{let{theme:t}=e;return{position:"sticky",width:"100%",height:"80vh",borderRadius:2,overflow:"hidden",marginLeft:t.spacing(2),top:116}});function K(e){var t,n,r;let{transaction_type:l="rent"}=e,[i,s]=(0,z.useQueryParam)("page",(0,z.withDefault)(z.NumberParam,1)),c=(0,B.useSearchParams)(),d=function(){var e;let t=null!==(e=(0,B.useSearchParams)().getAll("pt"))&&void 0!==e?e:[];return(0,C.useMemo)(()=>t?_().intersection(Object.keys(o.PG),t):[])}(),u=c.get("center");c.get("boundary");let p=u?u.split(",").map(e=>parseFloat(e)):[106.660172,10.762622],h=["bp","tp","ba","ta","center","radius","boundary"],m=(0,C.useMemo)(()=>{let e={};return c.forEach((t,n)=>{h.includes(n)&&(e[n]=t)}),e},[c]),{data:v,error:g,isLoading:x}=(0,R.JD)({page:i,limit:10,pt:d,transaction:l,radius:5,...m}),f=(null!==(n=null==v?void 0:v.properties)&&void 0!==n?n:[]).map(e=>({coordinates:e.location.coordinates,name:e.name,price:e.price,image:e.thumbnail,id:e._id,displayed_address:e.displayed_address}));return(0,a.jsxs)(S.Z,{container:!0,children:[(0,a.jsx)(S.Z,{xs:12,sm:6,md:7,children:x?(0,a.jsx)(A,{loading:x}):(0,a.jsx)(k,{properties:null==v?void 0:v.properties,totalPages:null!==(r=null==v?void 0:null===(t=v.pagination)||void 0===t?void 0:t.total_pages)&&void 0!==r?r:0,currentPage:i,handlePageChange:(e,t)=>{s(t)}})}),(0,a.jsx)(S.Z,{xs:12,sm:6,md:5,sx:{position:"relative"},children:(0,a.jsx)(G,{children:(0,a.jsx)(Q,{center:p,markerList:f})})})]})}},56095:function(e,t,n){n.d(t,{PG:function(){return u}});var a=n(71498),r=n(16279),o=n(74325),l=n(18249),i=n(32918),s=n(4481),c=n(22203),d=n(62089);[{value:"all",label:"All",viLabel:"Tất cả nh\xe0 đất"},{value:"house",label:"House",viLabel:"Nh\xe0 ri\xeang",Icon:a.Z},{value:"rooming_house",label:"Rooming House",viLabel:"Ph\xf2ng trọ",Icon:r.Z},{value:"dormitory",label:"Dormitory",viLabel:"K\xfd t\xfac x\xe1",Icon:o.Z},{value:"appartment",label:"Appartment",viLabel:"Căn hộ chung cư",Icon:l.Z},{value:"land",label:"Land",viLabel:"Đất",Icon:i.Z},{value:"office",label:"Office",viLabel:"Văn ph\xf2ng",Icon:s.Z},{value:"villa",label:"Villa",viLabel:"Biệt thự",Icon:c.Z},{value:"warehouse",label:"Warehouse",viLabel:"Kho, nh\xe0 xưởng",Icon:d.Z}].map(e=>e.value);let u={house:{value:"house",label:"House",viLabel:"Nh\xe0 ri\xeang",Icon:a.Z},room:{value:"room",label:"Rooming House",viLabel:"Ph\xf2ng trọ",Icon:r.Z},dormitory:{value:"dormitory",label:"Dormitory",viLabel:"K\xfd t\xfac x\xe1",Icon:o.Z},appartment:{value:"appartment",label:"Appartment",viLabel:"Căn hộ chung cư",Icon:l.Z},land:{value:"land",label:"Land",viLabel:"Đất",Icon:i.Z},office:{value:"office",label:"Office",viLabel:"Văn ph\xf2ng",Icon:s.Z},villa:{value:"villa",label:"Villa",viLabel:"Biệt thự",Icon:c.Z},warehouse:{value:"warehouse",label:"Warehouse",viLabel:"Kho, nh\xe0 xưởng",Icon:d.Z}}},57607:function(e,t,n){n.d(t,{Bx:function(){return l},JD:function(){return i}});var a=n(66817),r=n(43741),o=n(27230);let l=(0,r.LC)({reducerPath:"properties",baseQuery:(0,o.ni)({baseUrl:"http://localhost:3000"}),endpoints:e=>({getProperties:e.query({query:e=>({url:"/posts",params:{...e}}),transformResponse:a.F}),getPropertyById:e.query({query:e=>({url:"/posts/".concat(e)}),transformResponse:e=>e.data})})}),{useGetPropertiesQuery:i,useGetPropertyByIdQuery:s}=l},66817:function(e,t,n){n.d(t,{F:function(){return a}});let a=e=>{var t;return{properties:null!==(t=null==e?void 0:e.data)&&void 0!==t?t:[],pagination:null==e?void 0:e.pagination}}}}]);